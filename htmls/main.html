<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
	</head>
	
	<body">
		<header class="mui-bar mui-bar-nav">
		    <h1 id="title" class="mui-title">首页</h1>
		</header>
		
		<nav class="mui-bar mui-bar-tab">
		    <a class="mui-tab-item mui-active" href="s1.html">
		        <span class="mui-icon mui-icon-home"></span>
		        <span class="mui-tab-label">首页</span>
		    </a>
		    <a class="mui-tab-item" href="s2.html">
		        <span class="mui-icon mui-icon-person"></span>
		        <span class="mui-tab-label">拍一张</span>
		    </a>
		    <a class="mui-tab-item" href="s3.html">
		        <span class="mui-icon mui-icon-email"></span>
		        <span class="mui-tab-label">扫一扫</span>
		    </a>
		    <a class="mui-tab-item" href="s4.html">
		        <span class="mui-icon mui-icon-gear"></span>
		        <span class="mui-tab-label">个人中心</span>
		    </a>
		</nav>
		
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init();
			var subpage_style = {
				top: '45px',
				bottom: '50px'
			};
			var aniShow = {};
			var subpages = ["s1.html", "s2.html", "s3.html", "s4.html"];
/*			mui.plusReady(function(){
				var self = plus.webview.currentWebview();
				for (var i = 0; i < 4; i++) {
        			var sub = plus.webview.create(subpages[i], subpages[i], subpage_style);
        			if (i > 0) {
            			sub.hide();
        			}
        			self.append(sub);
    			}
			});*/
			mui.plusReady(function() {
				var self = plus.webview.currentWebview();
				for (var i = 0; i < 4; i++) {
					var temp = {};
					var sub = plus.webview.create(subpages[i], subpages[i], subpage_style);
					if (i > 0) {
						sub.hide();
					}else{
						temp[subpages[i]] = "true";
						mui.extend(aniShow,temp);
					}
					self.append(sub);
				}
			});
			
			var activeTab = subpages[0];
			var title = document.getElementById("title");
			
			mui(".mui-bar-tab").on("tap", "a", function(e){
				var targetTab = this.getAttribute("href");
				if(targetTab == activeTab){
					return;
				} 
				title.innerHTML = this.querySelector(".mui-tab-label").innerHTML;
				//若为iOS平台或非首次显示，则直接显示
					//否则，使用fade-in动画，且保存变量
					var temp = {};
					temp[targetTab] = "true";
					mui.extend(aniShow,temp);
					plus.webview.show(targetTab,"fade-in",300);
					plus.webview.show(targetTab);
				plus.webview.hide(activeTab);
				activeTab = targetTab;
			});
		</script>
	</body>

</html>